<html>
	<head>
		<title>Pudge Check Site</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
		<meta name="description" content="Former Breath Mints star hitter Pudge Nakamoto sentimint analysis.">
		<meta property="og:type" content="website">
		<meta property="og:url" content="http://yoori.space/pudgecheck/">
		<meta property="og:title" content="Pudge Check Site">
		<meta property="og:description" content="Former Breath Mints star hitter Pudge Nakamoto sentimint analysis.">
		<meta property="og:image" content="http://yoori.space/favicon-128.png">
		<meta property="twitter:card" content="summary">
		<meta name="twitter:title" content="Pudge Check Site">
		<meta name="twitter:description" content="Former Breath Mints star hitter Pudge Nakamoto sentimint analysis.">
		<meta name="twitter:image" content="http://yoori.space/favicon-128.png">
		<link rel="icon" href="/favicon-128.png" sizes="128x128">
		<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
		<style>
			html, body { padding:0;margin:0;background:#1f7b4f;color:#fff;font-family:'Roboto',sans-serif }
			header { display:flex;align-items:center;position:absolute;margin:20px }
			ul { list-style:none;margin:auto;padding:0;line-height:1.4em }
			h1 { display:inline-block;margin:0 }
			h1 + small { display:inline-block;margin-left:1em }
			span.sticker-ilb { position:relative; }
			span.sticker-ilb::after { content:"Blaseball";position:absolute;top:0;left:0;right:0;bottom:0;height:1.25em;line-height:1.25em;background:#000;margin:auto;padding:.25em;border-radius:4px;text-align:center;font-weight:700;transform:rotate(-7deg) }
			footer { background:#1ba562;width:100%;padding:10px 0;text-align:center }
			a { color:#fff;text-decoration:none;transition: all 0.4s ease-out }
			a:hover { color:#91f5c5 }
			#latest {  height:100%;width:80%;max-width:980px;margin:auto;display:flex;align-items:center;justify-content:center }
			#history { background:#178f55;padding:20px }
			#history h3 { width:80%;max-width:980px;margin:0 auto .5em;border-bottom:1px dashed #fff;padding-bottom:.5em;font-size: 1.8em;text-align:center }
			#history ul { width:80%;max-width:980px }
			#lovers { position:absolute;bottom:0;right:0;margin:10px;text-align:right }
			#haters { display:none;position:absolute;bottom:2em;right:0;color:#540303;margin:10px;text-align:center;animation:floating 10s infinite ease-in-out }
			#haters h4 { margin: 0 }
			#haters li:before { content:"\1F608";margin-right:.5em }
			#haters li:last-child { margin:0 }
			.huge { font-size:4em;text-align:center }
			.loading { animation:loading 8s infinite linear }
			.top { position:absolute;right:0;margin:0 10px }
			
			@keyframes loading {
				0% { color: #ffffff; }
				33% { color: #08f182; }
				66% { color: #4ad032; }
				100% { color: #ffffff; }
			}
			
			@keyframes floating {
				0% { bottom: 2em; }
				50% { bottom: 4em; }
				100% { bottom: 2em; }
			}
			
			@media screen and (max-width: 700px) {
				header { flex-wrap:wrap }
				h1 + small { margin-left:0 }
				.huge { font-size:2em }
				footer span { display:none }
				.top { position:relative;right:inherit;margin:0 }
			}
		</style>
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-T7S24X2FST"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-T7S24X2FST');
		</script>
	</head>
	<body>
		<a id="top"></a>
		<header>
			<h1>Pudge Check Site</h1>
			<small>How are the fickle <span class="sticker-ilb">Breath Mints</span> fans feeling about Pudge Nakamoto? (RIV Pudge Nakamoto)</small>
		</header>
		<main>
			<section id="latest"><span class="huge loading">Performing Pudge Sentimint Analysis</span></section>
			<section id="history" style="display:none">
				<h3>A Brief History of Pudge Vibes</h3>
				<ul></ul>
			</section>
			<section id="lovers" style="display:none">*<span>except</span> 2064arcade, audrey, babka, Big 00, Clementimes, Moon, Lee, Lim, Lord Caelum, Lynn, Lynnie, Nemi, Random, romadox, and Spooky</section>
			<section id="haters">
				<h4>Unrepentant Pudge Haters</h4>
				<ul><li>AJ</li><li>allis</li><li>ally</li><li>Astrid</li><li>Caetra</li><li>chrisw_b</li><li>fionna</li><li>iliana</li><li>kelp</li><li>Meg</li><li>pen</li><li>Snow Wisp</li><li>tctrain</li><li>toasts</li><li>Todd Bonzalez</li></ul>
			</section>
		</main>
		<footer>
			<span>yoori#1569 made this and is now afraid of unkillable Pudge</span>
			<a class="top" href="#top">&#x21d1; top</a>
		</footer>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/underscore@1.11.0/underscore-min.js"></script>
		<script>
			$(function() {
				$(".top").click(function(e) {
					e.preventDefault();
					$("body").animate({ scrollTop: 0 }, 400);
				});
				setTimeout(function() {
					$("#haters").fadeIn({ duration: 5000, easing: "linear" });
				}, 12000);
				$.ajax("https://api.sibr.dev/chronicler/v1/games/updates", {
					method: "GET",
					datatype: "json",
					data: {
						order: "desc",
						search: "Pudge Nakamoto",
						count: 1000
					},
					success: function(data) {
						var updates = _.chain(data.data).map(function(update) {
							return getRelevantUpdate(update);
						}).reject(function(update) { return !update; }).value();
						if(updates.length) {
							if(updates.length > 1) {
								$("#history").show();
							}
							_.each(updates, function(update, index) {
								if(index < 1) {
									$("#latest").empty();
									$("#latest").append("<span class='huge'>The ILB* " + (update.good ? "loves" : "dislikes") + (update.ghost ? " the ghost of" : "") + " Pudge Nakamoto because <a href='https://reblase.sibr.dev/game/" + update.gameId + "#" + update.hash + "' target='_blank'>" + update.message + "</a></span>");
									$("#lovers span").text(update.good ? "but especially" : "except");
									$("#lovers").show();
								} else if(index < 40) {
									$("#history ul").append("<li><a href='https://reblase.sibr.dev/game/" + update.gameId + "#" + update.hash + "' target='_blank'>" + (update.good ? "&#x1F49A;" : "&#x1F494;") + (update.ghost ? " The ghost of" : "") + " Pudge Nakamoto was previously " + (update.good ? "loved" : "disliked") + " because " + update.message + "</a></li>");
								}
							});
						} else {
							$("#latest").empty();
							$("#latest").append("<span class='huge'>The ILB* dislikes Pudge Nakamoto for <em>UNKNOWN REASONS</em>.</span>");
							$("#lovers").show();
						}
					},
					error: function() {
						$("#latest").empty();
						$("#latest").append("<span class='huge'>The ILB* dislikes Pudge Nakamoto for <em>API FAILURE REASONS</em>.</span>");
						$("#lovers").show();
					}
				});
				
				function getRelevantUpdate(update) {
					var data = { gameId: update.gameId, hash: update.hash, message: update.data.lastUpdate, ghost: false }, message = data.message.replace(/[\r\n]+/g, " "), matcher = message.match(/Pudge Nakamoto hit a flyout to (.+)\. (.+) tags up and scores!/i);
					if(update.data.season > 16 && update.data.season < 19 || (update.data.season == 16 && update.data.day > 11)) {
						data.ghost = true;
					}
					if(matcher) {
						data.good = true;
						data.message = matcher[2] + " scored off of their sacrfice fly!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hit a ground out to (.+)\. (.+) advances on the sacrifice./i);
					if(matcher) {
						data.good = true;
						data.message = matcher[2] + " scored off of their sacrfice bunt!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hit a (.+) to (.+)\./i);
					if(matcher) {
						data.good = false;
						data.message = "they hit a " + matcher[1] + " to " + matcher[2] + ".";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto (struck|strikes) out (swinging|looking|thinking)\.(\sPudge Nakamoto uses a Mind Trick!\sThe umpire sends them to first base\.)?/i);
					if(matcher) {
						data.good = !!matcher[3];
						data.message = "they " + (matcher[3] ? "used a Mind Trick to draw a walk": "struck out " + matcher[2]) + ".";
						return data;
					}
					matcher = message.match(/(.+) charmed Pudge Nakamoto! Pudge Nakamoto swings 3 times to strike out willingly!$/i);
					if(matcher) {
						data.good = false;
						data.message = "they were charmed by " + matcher[1] + " and struck out willingly!";
						return data;
					}
					matcher = message.match(/A murder of Crows ambush Pudge Nakamoto! They run to safety, resulting in an out.$/i);
					if(matcher) {
						data.good = false;
						data.message = "they were attacked by birds!";
						return data;
					}
					matcher = message.match(/(.+) siphoned some of Pudge Nakamoto's (.+) ability!/i);
					if(matcher) {
						data.good = false;
						data.message = matcher[1] + " gurgied their " + matcher[2] + " ability!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto siphoned some of (.+)'s (.+) ability!/i);
					if(matcher) {
						data.good = true;
						data.message = "they gurgied " + matcher[1] + "'s " + matcher[2] + " ability!";
						return data;
					}
					matcher = message.match(/A Big Peanut crashes into the field, encasing Pudge Nakamoto!$/i);
					if(matcher) {
						data.good = true;
						data.message = "a Big Peanut encased them!";
						return data;
					}
					matcher = message.match(/(.+) tastes the infinite! Pudge Nakamoto is Shelled!$/i);
					if(matcher) {
						data.good = true;
						data.message = "they were Shelled by " + matcher[1] + "!";
						return data;
					}
					matcher = message.match(/Replaced by Pudge Nakatamo/i);
					if(matcher) {
						data.good = false;
						data.message = "they replaced incinerated hitter Boyfriend Monreal!";
						return data;
					}
					matcher = message.match(/(.+) hits Pudge Nakamoto with a pitch! Pudge Nakamoto is now (.+)!$/i);
					if(matcher) {
						data.good = true;
						data.message = "they were hit by a pitch!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto gets caught stealing (.+)\.$/i);
					if(matcher) {
						data.good = false;
						data.message = "they were caught stealing " + matcher[1] + ".";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hit into a double play!/i);
					if(matcher) {
						data.good = false;
						data.message = "they hit into a double play.";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto draws a walk\.$/i);
					if(matcher) {
						data.good = true;
						data.message = "they drew a walk.";
						return data;
					}
					matcher = message.match(/(.+) hit a (.+) to Pudge Nakamoto(\'s Shell)?\./i);
					if(matcher) {
						data.good = true;
						data.message = (matcher[3] ? "their Shell" : "they") + " caught a " + matcher[2] + " from " + matcher[1] + ".";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hits a ([^!]+)!(\sThe ball lands in a Big Bucket\. An extra Run scores!)?(\s(.+) went up for the alley oop\.+\s\.+(they slammed it down for an extra Run!)?(but they can't connect\.)?)?(.*)$/i);
					if(matcher) {
						data.good = true;
						data.message = "they hit a " + matcher[1];
						if(update.data.scoreUpdate.match(/unruns/i)) {
							data.good = false;
							var unmatcher = matcher[1].match(/(\d)-run home run/i);
							if(unmatcher) {
								data.message = "they hit a " + unmatcher[1] + "-unrun home run";
							}
							unmatcher = matcher[1].match(/solo home run/i);
							if(unmatcher) {
								data.message = "they hit an solo home unrun";
							}
						}
						if(matcher[2]) {
							data.message += " that landed in the Big Bucket";
						}
						if(matcher[3] && matcher[5]) {
							data.message += " and " + matcher[4] + " slammed down the alley oop";
						}
						if(matcher[7]) {
							var scorers = _.compact(matcher[7].trim().split("scores!"));
							if(_.last(scorers).match(/.+ inflates \d+ balloons!/i)) {
								scorers.pop();
							}
							if(scorers.length) {
								data.message += " and " + (scorers.length > 1 ? (scorers.length + " runners") : scorers[0].trim()) + (update.data.scoreUpdate.match(/unruns/i) ? " unscored" : " scored");
							}
						}
						data.message += "!";
						return data;
					}
					matcher = message.match(/(.+) hits a .+ home run!\sPudge Nakamoto went up for the alley oop\.+\s\.+(?:(but they can't connect\.)|(they slammed it down for an extra Run!))/i);
					if(matcher) {
						data.good = !matcher[2] & !!matcher[3];
						data.message = " they " + (data.good ? "slammed down " : "failed to connect on ") + matcher[1] + "'" + (matcher[1].endsWith("s") ? "" : "s") + " alley oop" + (data.good ? " for an extra Run!" : ".");
						return data;
					}
					matcher = message.match(/Pudge Nakamoto steals (.+)(?:\.|!)$/i);
					if(matcher) {
						data.good = true;
						data.message = "they stole " + matcher[1] + "!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto is Beaned by a (.+)\. Pudge Nakamoto is (Tired|Wired)!/);
					if(matcher) {
						data.good = matcher[2] == "Wired";
						data.message = "they were beaned by a " + matcher[1] + " and became " + matcher[2] + "!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto is Poured Over with a (.+)! Pudge Nakamoto got a Free Refill\./);
					if(matcher) {
						data.good = true;
						data.message = "they were poured over with a " + matcher[1] + " and got a Free Refill!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto used their Free Refill\./);
					if(matcher) {
						data.good = true;
						data.message = "they used their Free Refill!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto(?: and .+)? chug a Third Wave of Coffee! They are now Triple Threats!/);
					if(matcher) {
						data.good = true;
						data.message = "they became a Triple Threat!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto is no longer a Triple Threat\./);
					if(matcher) {
						data.good = false;
						data.message = "they are no longer a Triple Threat!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hops on the Grind Rail toward third base. They do a (.+) \((\d+)\)! ... but lose their balance and bail! Out!$/);
					if(matcher) {
						data.good = false;
						data.message = "they couldn't land their " + matcher[1] + " (" + matcher[2] + ") and bailed.";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hops on the Grind Rail toward third base. They do a (.+) \((\d+)\)! They're tagged out doing a (.+) \((\d+)\)!$/);
					if(matcher) {
						data.good = false;
						data.message = "they got tagged out landing a " + matcher[1] + " + " + matcher[3] + " combo for " + (parseInt(matcher[2]) + parseInt(matcher[4])) + " points!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto hops on the Grind Rail toward third base. They do a (.+) \((\d+)\)! They land a (.+) \((\d+)\)! Safe!$/);
					if(matcher) {
						data.good = true;
						data.message = "they landed a " + matcher[1] + " + " + matcher[3] + " combo for " + (parseInt(matcher[2]) + parseInt(matcher[4])) + " points!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto was swept Elsewhere!/);
					if(matcher) {
						data.good = true;
						data.message = "they were swept Elsewhere!";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto returned from Elsewhere after (\d+) days!/);
					if(matcher) {
						data.good = false;
						data.message = "they returned from Elsewhere after " + matcher[1] + " days.";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto was pulled back from Elsewhere after (\d+) days!/);
					if(matcher) {
						data.good = false;
						data.message = "they were pulled back from Elsewhere after " + matcher[1] + " days.";
						return data;
					}
					matcher = message.match(/Pudge Nakamoto has been cured of their peanut allergy!/);
					if(matcher) {
						data.good = true;
						data.message = "they were cured of their peanut allergy!";
						return data;
					}
					matcher = message.match(/Rogue Umpire incinerated Pudge Nakamoto!/);
					if(matcher) {
						data.good = true;
						data.message = "they were incinerated by a Rogue Umpire. Rest in Violence, our wonderful friend.";
						return data;
					}
					//console.log(update.data.lastUpdate);
					return null;
				}
			});
		</script>
	</body>
</html>